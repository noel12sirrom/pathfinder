<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Contributors:
       Shavon Scale - 2008093
       Hueland Hunter - 2006702
       Brandon Bent - 2106015
       Leon Morris - 2111686 -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - PathFinder</title>
  <link rel="stylesheet" href="modal.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="admin.js"></script>
  <style>
    /* Ensure input text is visible - black text */
    input[type="text"],
    input[type="password"],
    input[type="number"],
    select {
      color: #000000 !important;
      -webkit-text-fill-color: #000000 !important;
    }
    
    input::placeholder {
      color: #6b7280 !important;
      opacity: 0.7;
      -webkit-text-fill-color: #6b7280 !important;
    }
    
    input:focus::placeholder {
      opacity: 0.5;
    }
    
    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus {
      -webkit-text-fill-color: #000000 !important;
      -webkit-box-shadow: 0 0 0px 1000px #ffffff inset !important;
    }
    
    select option {
      background-color: #ffffff;
      color: #000000;
    }
    
    /* Ensure body background matches */
    body {
      background-color: #121215;
    }
  </style>
</head>
<body>
  <!-- Password Protection Modal -->
  <div id="passwordModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="bg-dark-bg p-8 rounded-xl border border-dark-border shadow-outer-glow max-w-md w-full mx-4">
      <h2 class="text-white text-2xl font-bold mb-4 text-center">Admin Access</h2>
      <p class="text-gray-300 text-sm mb-6 text-center">Please enter the admin password to continue</p>
      <input 
        type="password" 
        id="passwordInput" 
        placeholder="Enter password"
        class="w-full bg-dark-input text-white px-4 py-3 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none mb-4"
        style="color: #000000; background-color: #ffffff;"
        autofocus
      />
      <p id="passwordError" class="text-red-400 text-sm mb-4 hidden">Incorrect password. Please try again.</p>
      <button 
        id="passwordSubmit"
        class="w-full gradient-btn from-accent-primary to-accent-secondary text-white px-4 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity"
      >
        Login
      </button>
      <a href="index.html" class="block text-center text-gray-400 text-sm mt-4 hover:text-white transition-colors">
        ← Back to PathFinder
      </a>
    </div>
  </div>

  <!-- Admin Panel Content -->
  <div id="adminContent" class="hidden min-h-screen p-8">
    <div class="max-w-7xl mx-auto">
      <!-- Header -->
      <div class="flex justify-between items-center mb-8">
        <h1 class="text-white text-4xl font-extrabold tracking-widest uppercase">
          Admin Panel
        </h1>
        <div class="flex gap-4">
          <a 
            href="index.html" 
            class="bg-dark-surface text-gray-300 px-4 py-2 rounded-lg border border-dark-border hover:border-accent-primary transition-colors"
          >
            ← Back to PathFinder
          </a>
          <button 
            id="logoutBtn"
            class="bg-accent-danger text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity"
          >
            Logout
          </button>
        </div>
      </div>

      <!-- Add New Route Section -->
      <div class="bg-dark-bg p-6 rounded-xl border border-dark-border shadow-outer-glow mb-8">
        <h2 class="text-white text-2xl font-bold mb-4">Add New Route</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
          <div>
            <label class="text-gray-300 text-sm mb-2 block">From Location</label>
            <input 
              type="text" 
              id="newFromLocation"
              placeholder="e.g., Kingston"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
            />
          </div>
          <div>
            <label class="text-gray-300 text-sm mb-2 block">To Location</label>
            <input 
              type="text" 
              id="newToLocation"
              placeholder="e.g., Montego Bay"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
            />
          </div>
          <div>
            <label class="text-gray-300 text-sm mb-2 block">Distance (km)</label>
            <input 
              type="number" 
              id="newDistance"
              placeholder="e.g., 50"
              step="0.1"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
            />
          </div>
          <div>
            <label class="text-gray-300 text-sm mb-2 block">Time (minutes)</label>
            <input 
              type="number" 
              id="newTime"
              placeholder="e.g., 45"
              step="0.1"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
            />
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <label class="text-gray-300 text-sm mb-2 block">Road Condition</label>
            <select 
              id="newCondition"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
            >
              <option value="paved">Paved</option>
              <option value="unpaved">Unpaved</option>
              <option value="broken_cisterns">Broken Cisterns</option>
              <option value="deep_potholes">Deep Potholes</option>
            </select>
          </div>
          <div>
            <label class="text-gray-300 text-sm mb-2 block">Status</label>
            <select 
              id="newStatus"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
            >
              <option value="open">Open</option>
              <option value="closed">Closed</option>
            </select>
          </div>
        </div>
        <button 
          id="addRouteBtn"
          class="gradient-btn from-accent-primary to-accent-secondary text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity"
        >
          Add Route
        </button>
        <p id="addRouteMessage" class="mt-4 text-sm"></p>
      </div>

      <!-- Existing Routes Section -->
      <div class="bg-dark-bg p-6 rounded-xl border border-dark-border shadow-outer-glow">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-white text-2xl font-bold">Existing Routes</h2>
          <button 
            id="refreshRoutesBtn"
            class="bg-dark-surface text-gray-300 px-4 py-2 rounded-lg border border-dark-border hover:border-accent-primary transition-colors"
          >
            Refresh
          </button>
        </div>
        <div id="routesList" class="space-y-4">
          <p class="text-gray-400 text-center py-8">Loading routes...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Route Modal -->
  <div id="editModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
    <div class="bg-dark-bg p-8 rounded-xl border border-dark-border shadow-outer-glow max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
      <h2 class="text-white text-2xl font-bold mb-6">Edit Route</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div>
          <label class="text-gray-300 text-sm mb-2 block">From Location</label>
          <input 
            type="text" 
            id="editFromLocation"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
          />
        </div>
        <div>
          <label class="text-gray-300 text-sm mb-2 block">To Location</label>
          <input 
            type="text" 
            id="editToLocation"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
          />
        </div>
        <div>
          <label class="text-gray-300 text-sm mb-2 block">Distance (km)</label>
          <input 
            type="number" 
            id="editDistance"
            step="0.1"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
          />
        </div>
        <div>
          <label class="text-gray-300 text-sm mb-2 block">Time (minutes)</label>
          <input 
            type="number" 
            id="editTime"
            step="0.1"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
          />
        </div>
        <div>
          <label class="text-gray-300 text-sm mb-2 block">Road Condition</label>
          <select 
            id="editCondition"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
          >
            <option value="paved">Paved</option>
            <option value="unpaved">Unpaved</option>
            <option value="broken_cisterns">Broken Cisterns</option>
            <option value="deep_potholes">Deep Potholes</option>
          </select>
        </div>
        <div>
          <label class="text-gray-300 text-sm mb-2 block">Status</label>
          <select 
            id="editStatus"
              class="w-full bg-dark-input text-white px-4 py-2 rounded-lg border border-dark-border focus:border-accent-primary focus:outline-none"
              style="color: #000000; background-color: #ffffff;"
          >
            <option value="open">Open</option>
            <option value="closed">Closed</option>
          </select>
        </div>
      </div>
      <p id="editRouteMessage" class="mb-4 text-sm"></p>
      <div class="flex gap-4">
        <button 
          id="saveEditBtn"
          class="flex-1 gradient-btn from-accent-primary to-accent-secondary text-white px-4 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity"
        >
          Save Changes
        </button>
        <button 
          id="cancelEditBtn"
          class="flex-1 bg-dark-surface text-gray-300 px-4 py-3 rounded-lg border border-dark-border hover:border-accent-primary transition-colors"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
    <div class="bg-dark-bg p-8 rounded-xl border border-dark-border shadow-outer-glow max-w-md w-full mx-4">
      <h2 class="text-white text-2xl font-bold mb-4 text-center">Confirm Delete</h2>
      <p class="text-gray-300 text-sm mb-6 text-center" id="deleteConfirmText">Are you sure you want to delete this route?</p>
      <div class="flex gap-4">
        <button 
          id="confirmDeleteBtn"
          class="flex-1 bg-accent-danger text-white px-4 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity"
        >
          Delete
        </button>
        <button 
          id="cancelDeleteBtn"
          class="flex-1 bg-dark-surface text-gray-300 px-4 py-3 rounded-lg border border-dark-border hover:border-accent-primary transition-colors"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</body>
</html>

